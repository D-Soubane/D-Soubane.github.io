<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Soubane | Physicist</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Google Analytics Tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M5S63MHHRH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-M5S63MHHRH');
    </script>

    <style>
        /* Navigation Styles */
        nav ul {
            display: flex;
            list-style-type: none;
            padding: 0;
            background-color: #0077FF;
            margin: 0;
        }

        nav ul li {
            padding: 10px 15px;
        }

        nav ul li a {
            color: darkyellow;
            text-decoration: none;
            font-weight: bold;
            font-size: 1em;
        }

        /* Visitor Info Styling */
        #visitor-info {
            background-color: #e3f2fd;
            width: 300px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9em;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin: 10px auto;
            text-align: center;
        }

        .flags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .flags img {
            width: 20px;
            height: 15px;
            margin: 2px;
        }

        #clock-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px auto;
        }

        canvas {
            position: relative;
            background-color: #f5f5f5;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #canada-icon {
            position: absolute;
            top: 90px;
            left: 90px;
            width: 20px;
            height: 20px;
        }

        footer {
            text-align: center;
            padding: 10px 0;
            background-color: #0077FF;
            color: white;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">About Us</a></li>
                <li><a href="Research.html">Research</a></li>
                <li><a href="Teaching.html">Teaching</a></li>
                <li><a href="People.html">People</a></li>
                <li><a href="Pickup.html">Pick-ups & Highlights</a></li>
            </ul>
        </nav>
    </header>

    <section class="banner">
        <h1>Welcome to Prof. Soubane's Research Group</h1>
        <p>Email: d.soubane(at)uca.ac.ma</p>
    </section>

    <!-- Visitor Info Section -->
    <div id="visitor-info">
        <p>Total Visitors: <span id="total-visitors">Loading...</span></p>
        <div class="flags" id="country-flags"></div>
    </div>

    <!-- Analog Clock -->
    <div id="clock-container">
        <canvas id="analog-clock" width="200" height="200"></canvas>
        <img id="canada-icon" src="https://upload.wikimedia.org/wikipedia/commons/a/a3/CN_Tower_tiny.png" alt="Canada Icon">
    </div>

    <!-- Physics Podcast Section -->
    <section id="physics-podcast">
        <h2>Physics Podcast Recommendation</h2>
        <p>Listen to fascinating discussions about physics on <a href="https://www.physicscentral.com/explore/podcast/" target="_blank">Physics Central Podcast</a>.</p>
    </section>

    <footer>
        <p>&copy; 2023 Dr. Soubane. All rights reserved.</p>
    </footer>

    <script>
        const GEO_API = "https://api.ipgeolocation.io/ipgeo?apiKey=b330d2b363544a6ebabae5777c8d0456";

        const visitors = {};

        async function trackVisitor() {
            try {
                const response = await fetch(GEO_API);
                const data = await response.json();
                const country = data.country_name || "Unknown";

                if (!visitors[country]) visitors[country] = 1;
                else visitors[country]++;

                const totalVisitors = Object.values(visitors).reduce((a, b) => a + b, 0);
                document.getElementById("total-visitors").textContent = totalVisitors;

                const flagsContainer = document.getElementById("country-flags");
                flagsContainer.innerHTML = "";

                for (const [country, count] of Object.entries(visitors)) {
                    const countryCode = country.slice(0, 2).toLowerCase();
                    flagsContainer.innerHTML += `
                        <div>
                            <img src="https://flagcdn.com/w40/${countryCode}.png" alt="${country}">
                            ${country}: ${count}
                        </div>
                    `;
                }
            } catch (error) {
                console.error("Error tracking visitor:", error);
            }
        }

        trackVisitor();

        // Analog Clock Script
        const canvas = document.getElementById('analog-clock');
        const ctx = canvas.getContext('2d');
        const radius = canvas.height / 2;
        const cities = ['Toronto', 'Vancouver', 'Montreal', 'Calgary', 'Ottawa'];

        ctx.translate(radius, radius);
        const drawClock = () => {
            const now = new Date();
            const city = cities[now.getSeconds() % cities.length];
            const hour = now.getHours();
            const minute = now.getMinutes();
            const second = now.getSeconds();

            ctx.clearRect(-radius, -radius, canvas.width, canvas.height);

            ctx.beginPath();
            ctx.arc(0, 0, radius - 5, 0, 2 * Math.PI);
            ctx.fillStyle = "#ffffff";
            ctx.fill();

            ctx.lineWidth = 4;
            ctx.strokeStyle = "#0077FF";
            ctx.stroke();

            const drawHand = (value, length, width) => {
                const angle = (value * Math.PI) / 30 - Math.PI / 2;
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(length * Math.cos(angle), length * Math.sin(angle));
                ctx.lineWidth = width;
                ctx.strokeStyle = "#333";
                ctx.stroke();
            };

            drawHand(hour % 12, radius * 0.5, 6);
            drawHand(minute, radius * 0.8, 4);
            drawHand(second, radius * 0.9, 2);

            // Display city name
            ctx.font = "10px Arial";
            ctx.textAlign = "center";
            ctx.fillText(city, 0, radius * 0.6);
        };

        setInterval(drawClock, 1000);
    </script>
</body>
</html>
